# 第05章 条件判断
---

[TOC]

## 5.1 什么是条件判断？
为了实现程序在不同条件下执行不同的处理，Ruby提供了条件判断语句，主要有如下三种：
- if 语句
- unless 语句
- case 语句
<br/>

## 5.2 Ruby 中的条件

### 条件和真假值
我们在之前结束过条件中常用的比较运算符，除此之外，Ruby 中还有很多可以用于条件判断的方法。关于Ruby中的真假值，定义如下
| 值 | 说明 |
| --- | ------ |
| 真 | false，nil 以外的对象 |
| 假 | false，nil |

在 Ruby 中还有个约定的规则，即返回真假值的方法都要以 `?` 结尾，建议大家遵守。
<br/>

## 5.3 逻辑运算符
在判断多个条件时，我么会用到逻辑运算符 `&&` 和 `||`
- `条件1 && 条件2`：表示条件1和条件2同时为真时，表达式返回真；否则返回假
- `条件1 || 条件2`：表示条件1或条件2为真时，表达式范围真；否则返回假
- `! 条件`：表示相反的条件，即条件为假时，表达式返回真；条件为真时，表达式返回假；

条件判断对控制程序的行为非常重要，建议尽量使用容易理解的条件。
在 Ruby 中还有与  `&&` `||` `! ` 意思相同，但优先级较低的 `and` `or` `not` 。关于运算符的优先级，详见 9.5 节。
<br/>

## 5.4 if 语句
if 语句是最基本的条件判断语句，语法如下：（* then 可以省略）
```ruby
if 条件 then
  处理
end
```
在此基础之上，可以使用 `elseif`，`else`：
```ruby
if 条件1 then
  处理1
elseif 条件2 then
  处理2
else
  处理3
end
```
<br/>

## 5.5 unless 语句
unless 语句刚好与 if 语句相反，语法如下：
```ruby
unless 条件 then
  处理
then
```
unless 语句形式和 if 语句相同，但 if 语句是条件为真时执行处理，unless 则是在条件为假时执行处理。

unless 语句也可以使用 else：
```ruby
unless 条件 then
  处理1
else
  处理2
then
```
<br/>

## 5.6 case 语句
条件有多个时，if 与 elseif 虽然可以达到判断多个条件的效果，但如果是要比较某个对象的值，使用 case 语句更加合适：
```ruby
case 比较值
when 值1
  处理1
when 值2
  处理2
else
  处理3
end
```
when 语句可以一直指定多个值，用逗号隔开即可。
另外，case 的“值”支持使用正则表达式。
<br/>

### 专栏：`===` 与 `case` 语句
case 语句在判断与 when 的值是否相同时，实际是使用 `===` 运算符来判断的。左边是数值或字符串时，`===`与`==` 的意义是一样的，除此之外，`===`还可以与 `=~` 一样判断正则表达式是否匹配，或者判断右边的类是否属于左边的类。相比单纯地判断两边的值是否相等，`===`能表达更加广义的相等。
<br/>

## 5.7 if 修饰符与 unless 修饰符
if 与 unluess 可以写在需要执行的处理后面，这与普通写法是等价的，但使用修饰符能使用程序更加紧凑，逻辑突出。
<br/>

## 5.8 小结
本章介绍了下面内容：
- 真假值
    - nil 或者 false 时为假
    - 除此之外的值为真
- 条件判断语句
    - if 语句
    - unless 语句
    - case 语句
- 比较
    - 用 if 或 unless 语句时，会用到比较运算符、以?结尾的方法、逻辑运算符等
- if 语句，unless 语句：条件判断基本语句
- case 语句：根据对象的不同状态采取不同的处理时用到，比较时不同对象采用不同的处理方法。
<br/>

### 专栏：对象的同一性
所有的对象都有标识和值。

- **标识**（ID）用来表示对象的同一性，Ruby 中所有的对象都是唯一的，对象的 ID 可以通过 `object_id`（或者`__id__`）方法获得。我们用 `equal? ` 方法判断两个对象是否为同一个对象。（ID 值是否相同）
- 对象的 **值** 是对象持有的信息，Ruby 使用 `==` 判断对象的值是否相等，除此之外 Ruby 还提供了 `eql?` 方法判断对象的值是否相等，它们都是 Object 类定义的方法，大多数情况是相同的。但也有例外，数值类会重定义 `eql?` 方法，导致 `1.0.eql?(1)  #=> false`，在一些需要严谨的程序中这很有用。例如，散列对象内部键值比较实用了 `eql?` 方法，因此 0 和 0.0 是不同的键。
